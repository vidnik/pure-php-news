{% extends "admin/base.twig" %}

{% block title %}Admin-news{% endblock %}

{% block content %}
    <div class="mt-5 text-center">
        <h1>News management page</h1>
    </div>
    <div class="d-flex justify-content-center container mt-5">
        <div class="w-100">
            <a class="btn btn-primary col-2 mb-4 ms-auto" href="/admin/news/add" role="button">Add new article</a>

            <div class="justify-content-center">
                <div class="flextable">
                    <div class="flex_row">
                        <div class="flex_field">image</div>
                        <div class="flex_field">id</div>
                        <div class="flex_field">title</div>
                        <div class="flex_field">content</div>
                        <div class="flex_field">date</div>
                        <div class="flex_field">creator</div>
                        <div class="flex_field">categories</div>
                    </div>

                    {% for article in articles %}
                        <a href="/admin/news/update?id={{ article.id }}">
                            <div class="flex_row ">
                                <div class="flex_field">
                                    <img width="100px" src="{{ asset(article.image , "images") }}" alt="{{ article.image }}">
                                </div>
                                <div class="flex_field">{{ article.id }}</div>
                                <div class="flex_field">{{ article.title|length > 50 ? article.title|slice(0, 50) ~ '...' : article.title }}</div>
                                <div class="flex_field">{{ article.date }}</div>
                                <div class="flex_field">{{ article.username }}</div>
                                <div class="flex_field">
                                    {% for category in article.categories %}
                                        {{ category.name }};
                                    {% else %}
                                        -
                                    {% endfor %}
                                </div>
                            </div>
                        </a>
                    {% else %}
                        There are no any article in db
                    {% endfor %}
                </div>
            </div>
        </div>


    </div>
{% endblock %}